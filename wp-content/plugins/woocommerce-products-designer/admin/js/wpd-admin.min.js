!function(t){"use strict";t(document).ready(function(){function e(e){"undefined"==typeof e&&(e=""),t(e+" select.o-select2").each(function(){t(this).select2({allowClear:!0})})}function n(){t(".wpc-color").each(function(e,n){var c=t(this),o=c.val();c.css("background-color",o),t(this).ColorPicker({color:o,onShow:function(e){return t(e).fadeIn(500),!1},onChange:function(t,e,n){c.css("background-color","#"+e),c.val("#"+e)}})})}function c(e){t(e+" .TabbedPanels").each(function(){var e="tabbedpanels_"+t(this).attr("id"),n=t.cookie(e)?parseInt(t.cookie(e)):0;new Spry.Widget.TabbedPanels(t(this).attr("id"),{defaultTab:n-1})})}t(".edit-php.post-type-wpc-template .wrap h2 .add-new-h2").show(),t(".js-example-basic-single").select2(),t(document).on("click",".wpc_img_upload",function(e){e.preventDefault();var n=t(this).attr("data-selector"),c=wp.media({title:"Please set the picture",button:{text:"Set Image"},multiple:!1}).on("select",function(){var e=c.state().get("selection");e.map(function(e){e=e.toJSON(),t("#"+n).attr("value",e.id),t("#"+n+"_preview").html("<img src='"+e.url+"'>")})}).open()}),setTimeout(function(){t("#font").select2({allowClear:!0})},500),e(),t(document).on("change","#font",function(){var e=t("#font  option:selected").text(),n=t("#font   option:selected").val();t(".font_auto_name").val(e),t(".font_auto_url").val(n)}),t(document).on("click","#wpc-add-clipart",function(e){e.preventDefault();var n=(t(this).attr("data-selector"),t(this),wp.media({title:"Please set the picture",button:{text:"Set Image"},multiple:!0}).on("select",function(){var e=n.state().get("selection");e.map(function(e){e=e.toJSON();var n="<input type='hidden' value='"+e.id+"' name='selected-cliparts[]'>";n=n+"<span class='wpc-clipart-holder'><img src='"+e.url+"'>",n+="<label>Price: <input type='text' value='0' name='wpc-cliparts-prices[]'></label>",n=n+"<a href='#' class='button wpc-remove-clipart' data-id='"+e.id+"'>Remove</a></span>",t("#cliparts-container").prepend(n)})}).open())}),t(document).on("click",".wpc-remove-clipart",function(e){e.preventDefault();var n=t(this).data("id");t('#cliparts-form > input[value="'+n+'"]').remove(),t(this).parent().remove()}),t(document).on("click",".o-add-font-file",function(e){e.preventDefault();var n=wp.media({title:"Please set the picture",button:{text:"Select picture(s)"},multiple:!1}).on("select",function(){var e=n.state().get("selection");e.map(function(e){e=e.toJSON();var n=t(".font_style_table tbody tr").length,c=t("#wpd-font-tpl").val(),o=c.replace(/{index}/g,n);t(".font_style_table tbody").prepend(o),t("#file_data_"+n).find("input[type=hidden]").val(e.id),t("#file_data_"+n).parent().find(".media-name").html(e.filename)})}).open()}),t(document).on("click",".o-remove-font-file",function(e){e.preventDefault(),t(this).parent().find("input[type=hidden]").val(""),t(this).parent().parent().find(".media-name").html(""),t(this).parent().parent().remove()}),t(document).on("click","#wpc-customizer button",function(t){t.preventDefault()}),t(document).on("change",".wpc-activate-part-cb",function(e){var n=t(this).is(":checked"),c=t(this).attr("data-selector"),o=c+"_preview";n?t("#"+c).attr("value",0):t("#"+c).attr("value",""),t("#"+o).html("")}),t(document).on("change",".wpc-ovni-cb",function(e){var n=t(this).is(":checked"),c=t(this).parent().find("input[type=hidden]");n?c.val(1):c.val(-1)}),t(document).on("click",".wpc_img_remove",function(e){e.preventDefault();var n=t(this).siblings(".wpc-activate-part-cb").is(":checked"),c=t(this).attr("data-selector"),o=c+"_preview";n?t("#"+c).attr("value",0):t("#"+c).attr("value",""),t("#"+o).html("")}),t('[href="#wpc_related_products_tab_data"]').on("click",function(){var e=t("#post_ID").val();t.post(ajax_object.ajax_url,{action:"get_related_products_content",product_id:e},function(e){t("#wpc_related_products_tab_data .related-products-container").html(e)})}),t('a[href*="post-new.php?post_type=wpc-template"]').click(function(e){e.preventDefault(),t("#wpc-products-selector-modal").omodal("show")}),t("#wpc-select-template").click(function(e){var n=t("select[name=template_base_pdt]").val();if("undefined"==typeof n)alert("Please select a product first");else{var c=t('a[href*="post-new.php?post_type=wpc-template"]').first().attr("href");t(location).attr("href",c+"&base-product="+n)}}),t("#wpc-settings .help_tip").each(function(e,n){var c=t(n).data("tip");t(n).tooltip({title:c})}),t("#wpc-settings [name='wpc-colors-options[wpc-color-palette]']").change(function(){var e=t(this).val();"custom"==e?t("#wpd-predefined-colors-options").show():t("#wpd-predefined-colors-options").hide()}),t(document).on("keyup","#wpc-settings [name='wpc-colors-options[wpc-custom-palette][]']",function(e){var n=t(this).val();t(this).css("background-color",n)}),t("#wpc-settings #wpc-add-color").click(function(e){e.preventDefault();var c='<div><input type="text" name="wpc-colors-options[wpc-custom-palette][]" class="wpc-color"><button class="button wpc-remove-color">Remove</button></div>';t("#wpc-settings .wpc-colors").append(c),n()}),t(document).on("click","#wpc-settings .wpc-remove-color",function(e){e.preventDefault(),t(this).parent().remove()}),t(document).on("click",".wpc-add-rule",function(e){var n=t(".wpc-rules-table tr").length,c=t(this).data("group"),o=t("#wpc-rule-tpl").val(),a=o.replace(/{rule-group}/g,c),i=a.replace(/{rule-index}/g,n);t(this).parents(".wpc-rules-table").find("tbody").append(i),t(this).parents(".wpc-rules-table").find(".a_price").attr("rowspan",n+1)}),t(document).on("click",".wpc-add-group",function(e){var n=0,c=t(".wpc-rules-table").length,o=t("#wpc-first-rule-tpl").val(),a=o.replace(/{rule-group}/g,c),i=a.replace(/{rule-index}/g,n),p='<table class="wpc-rules-table widefat"><tbody>'+i+"</tbody></table>";t(".wpc-rules-table-container").append(p)}),t(document).on("click",".wpc-remove-rule",function(e){var n=t(".wpc-rules-table tr").length;t(this).parents(".wpc-rules-table").find(".a_price").attr("rowspan",n-1),t(this).parents("tr").remove()}),t(document).on("keyup",".color_field",function(e){var n=t(this).val();t(this).css("background-color",n)}),n(),c("body"),t(".TabbedPanelsTab").click(function(e){var n="tabbedpanels_"+t(this).parent().parent(".TabbedPanels").attr("id");t.cookie(n,parseInt(t(this).attr("tabindex")))}),t(document).on("click",".wpd-add-media",function(e){e.preventDefault();var n=t(this),c=wp.media({title:"Please select the background image",button:{text:"Set"},multiple:!1}).on("select",function(){var t=c.state().get("selection");t.map(function(t){t=t.toJSON(),n.parent().find("img").attr("src",t.url),n.parent().find("input[type=hidden]").val(t.id)})}).open()}),t(document).on("click",".wpd-remove-media",function(e){e.preventDefault(),t(this).parent().find("img").attr("src",""),t(this).parent().find("input[type=hidden]").val("")}),t(document).on("change",".wpc-grid.wpc-grid-pad .wpc-color",function(e){var n=t(this).val();t(this).css("background-color",n)}),t(document).on("change","#wpc-upload-options input[name='wpc-upload-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-upload-options tr:not(:first-child) input[name^='wpc-upload-options'][type='checkbox']").prop("checked",n)}),t(document).on("change","#wpc-texts-options input[name='wpc-texts-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-texts-options tr:not(:first-child) input[name^='wpc-texts-options'][type='checkbox']").prop("checked",n)}),t(document).on("change","#wpc-shapes-options input[name='wpc-shapes-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-shapes-options tr:not(:first-child) input[name^='wpc-shapes-options'][type='checkbox']").prop("checked",n)}),t(document).on("change","#wpc-images-options input[name='wpc-images-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-images-options tr:not(:first-child) input[name^='wpc-images-options'][type='checkbox']").prop("checked",n)}),t(document).on("change","#wpc-designs-options input[name='wpc-designs-options[visible-tab]']",function(e){var n=t(this).is(":checked");t("#wpc-designs-options tr:not(:first-child) input[name^='wpc-designs-options'][type='checkbox']").prop("checked",n)}),t(".datatable").length&&t(".datatable").DataTable({bAutoWidth:!1}),t("#wpd-check-all-products").change(function(){var e=this.checked;t("#bulk-definition-table tbody input[type=checkbox]").prop("checked",e)}),t(document).on("woocommerce_variations_loaded","#woocommerce-product-data",function(t){c("#woocommerce-product-data"),e("#woocommerce-product-data")})})}(jQuery);