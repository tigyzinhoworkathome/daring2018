function is_json(e){return/^[\],:{}\s]*$/.test(e.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))?!0:!1}function get_design_options(){var e={};jQuery(".wpc-container .ninja-forms-form-wrap").find("input[type=text], input[type=checkbox], input[type=radio], input[type=number], select, textarea, input[name=_form_id]").each(function(t){var a=jQuery(this).attr("name");if(""!=a&&"undefined"!=typeof a){var n=jQuery(this).attr("type"),i="";if("radio"==n)i=jQuery(".ninja-forms-form-wrap [name="+a+"]:checked").length?jQuery(".ninja-forms-form-wrap [name="+a+"]:checked").val():"";else if("checkbox"==n)jQuery(this).parents(".list-checkbox-wrap").length>0?(i=e.hasOwnProperty(a)?e[a]:"",i+=jQuery(this).is(":checked")?jQuery(this).val()+": checked; ":jQuery(this).val()+": unchecked; "):i=jQuery(this).is(":checked")?" checked":" unchecked";else if(jQuery.isArray(jQuery(this).val())){var r=jQuery(this).val();jQuery.each(r,function(e,t){i+=e<r.length-1?t+" | ":t})}else i=jQuery(this).val();e[a]=i}});var t={};if(jQuery(".wpd-qty").length>0){var a=jQuery(".wpd-qty").first().attr("opt_price");return"undefined"!=a&&(t.opt_price=a),t.wpc_design_opt_list=e,t}return t.wpc_design_opt_list=e,t}!function(e){"use strict";e(document).ready(function(){function t(t,a,n){var i=0,r=t.data("type");if("simple"==r?i=t.data("id"):"variable"==r&&(i=e("input[name='variation_id']").val()),!i)return void alert("Select the product options first");var o=a[i],s=t.data("id");void 0===o?(o=a[s],void 0===o?n&&alert(n):e(location).attr("href",o)):e(location).attr("href",o)}function a(t,a,n,i){if(is_json(t)){var r=e.parseJSON(t);r.success?(e(".wpc-uploaded-file").html(r.message),e(".wpd-hide-cart-button").removeClass("wpd-hide-cart-button")):alert(r.message)}else console.log(t);e("#user-custom-design").val("")}function n(e){return"number"!=typeof e?"":e>=1e9?(e/1e9).toFixed(2)+" GB":e>=1e6?(e/1e6).toFixed(2)+" MB":(e/1e3).toFixed(2)+" KB"}if(e(".single_variation_wrap").on("show_variation",function(t,a){var n=e("input[name='variation_id']").val();n&&(e(".wpd-buttons-wrap-variation").hide(),e(".wpd-buttons-wrap-variation[data-id='"+n+"']").show())}),e(".wpd-delete-design").click(function(){var t=e(this).data("index");e.get(ajax_object.ajax_url,{action:"delete_saved_design",design_index:t},function(e){e.success?(alert(e.success_message),location.reload()):alert(e.failure_message)},"json")}),e(document).on("touchstart click",".single-product #btn-tpl",function(){var a=e(this);t(a,template_pages_urls,template_page_message)}),e(".native-uploader #user-custom-design").change(function(){var t=e(this).val().toLowerCase();""!=t&&e("#custom-upload-form").ajaxForm({success:a}).submit()}),e("#custom-upload-form.custom-uploader").length){var i=e("#custom-upload-form.custom-uploader .acd-upload-info");e("#custom-upload-form.custom-uploader").fileupload({dropZone:e("#drop"),url:ajax_object.ajax_url,add:function(t,a){var r=e('<div class="working"><div class="acd-info"></div><div class="acd-progress-bar"><div class="acd-progress"></div></div></div>');r.find(".acd-info").text(a.files[0].name).append("<i>"+n(a.files[0].size)+"</i>"),i.html(""),a.context=r.appendTo(i),r.find("input").knob(),r.find("span").click(function(){r.hasClass("working")&&o.abort(),r.fadeOut(function(){r.remove()})});var o=a.submit()},progress:function(e,t){var a=parseInt(t.loaded/t.total*100,10);t.context.find(".acd-progress").css("width",a+"%"),100==a&&t.context.removeClass("working")},fail:function(e,t){t.context.addClass("error")},done:function(e,t){a(t.result,!1,!1,!1)}})}e(".wpd-design-opt .ninja-forms-form").length>0&&(e(".cart").length>0?e(document).on("change",".ninja-forms-form .ninja-forms-field",function(){e("#wpd-design-opt-price").length<1&&e("<input>").attr({type:"hidden",id:"wpd-design-opt-price",name:"wpd-design-opt"}).appendTo(".cart");var t=e('.ninja-forms-form .calc-wrap input[type = "text"]').val(),a=get_design_options();a.opt_price=t,e("#wpd-design-opt-price").val(JSON.stringify(a)),e(".amount").length>0&&e(".amount").html(e(".wpd-design-opt").data("currency_symbol")+" "+(parseFloat(e(".wpd-design-opt").data("regular_price"))+parseFloat(t)))}):e(document).on("change",'.ninja-forms-form .calc-wrap input[type = "text"]',function(){var t=e(this).val();return e(".wpd-qty").length>0?(e(".wpd-qty").attr("opt_price",t),void e(".wpd-qty").trigger("change")):t}))})}(jQuery);